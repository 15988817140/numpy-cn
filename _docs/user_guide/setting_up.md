<title>什么是NumPy？ - <%-__DOC_NAME__ %></title>
<meta name="keywords" content="什么是numpy,numpy是什么,numpy介绍" />

# 介绍

## 什么是NumPy？

NumPy是Python中科学计算的基础软件包。 
它是一个提供多了维数组对象，多种派生对象（如：掩码数组、矩阵）以及用于快速操作数组的函数及API，
它包括数学、逻辑、数组形状变换、排序、选择、I/O 、离散傅立叶变换、基本线性代数、基本统计运算、随机模拟等等。

NumPy包的核心是ndarray对象。 

它封装了python原生的同数据类型的n维数组，为了保证其性能优良，其中有许多操作都是代码在本地进行编译后执行的。 
NumPy数组 和 标准Python Array（数组） 之间有几个重要的区别：

* NumPy数组在创建时具有固定的大小，与Python的原生数组对象（可以动态增长）不同。 更改ndarray的大小将创建一个新数组并删除原来的数组。
* NumPy数组中的元素都需要具有相同的数据类型，因此在内存中的大小相同。 例外情况：Python的原生数组里包含了NumPy的对象的时候，这种情况下就允许不同大小元素的数组。
* NumPy数组有助于对大量数据进行高级数学和其他类型的操作。 通常，这些操作的执行效率更高，比使用Python原生数组的代码更少。
* 越来越多的基于Python的科学和数学软件包使用NumPy数组; 虽然这些工具通常都支持Python的原生数组作为参数，但它们在处理之前会还是会将输入的数组转换为NumPy的数组，而且也通常输出为NumPy数组。 换句话说，为了高效地使用当今科学/数学基于Python的工具（大部分的科学计算工具），你只知道如何使用Python的原生数组类型是不够的 - 还需要知道如何使用NumPy数组。

关于数组大小和速度的要点在科学计算中尤为重要。举一个简单的例子，考虑将1维数组中的每个元素与相同长度的另一个序列中的相应元素相乘的情况。如果数据存储在两个Python列表a和b中，我们可以迭代每个元素，如下所示：

```python
c = []
for i in range(len(a)):
    c.append(a[i]*b[i])
```

确实符合我们的要求，但如果a和b每个包含数百万个数字，我们将为Python中循环的低效率付出代价。我们可以通过使用C语言来编写代码帮助我们更快地完成相同的任务（为了清楚起见，我们忽略了变量声明和初始化，内存分配等）

```c
for (i = 0; i < rows; i++): {
  c[i] = a[i]*b[i];
}
```

这节省了解释Python代码和操作Python对象所涉及的所有开销，但牺牲了用Python编写代码所带来的好处。此外，编码工作需要增加的维度，我们的数据。例如，对于二维数组，C代码(如前所述)会扩展为这样：

```c
for (i = 0; i < rows; i++): {
  for (j = 0; j < columns; j++): {
    c[i][j] = a[i][j]*b[i][j];
  }
}
```

NumPy为我们提供了两全其美的解决方案：当涉及到ndarray时，逐个元素的操作是“默认模式”，但逐个元素的操作由预编译的C代码快速执行。在NumPy中：

```python
c = a * b
```

以近C速度执行前面的示例所做的事情，但是我们期望基于Python的代码具有简单性。的确，NumPy的语法更为简单！最后一个例子说明了NumPy的两个特征，它们是NumPy的大部分功能的基础：矢量化和广播。

矢量化描述了代码中没有任何显式的循环、索引等这些事情，当然，只是在优化的、预编译的C代码中“幕后”发生了这些事情。矢量化代码有许多优点，其中包括：

- 矢量化代码更简洁，更易于阅读
- 更少的代码行通常意味着更少的错误
- 代码更接近于标准的数学符号（更通俗易懂、更容易、正确的编码常规数学结构）
- 矢量化导致更多“Pythonic”代码。如果没有矢量化，我们的代码就会被低效且难以阅读的``循环``所困扰。

广播是用来描述操作的隐式逐个元素行为的术语；一般来说，在NumPy中，所有的操作，不仅是算术操作，而且是逻辑的、按位的、功能的等，以这种隐式逐个元素的方式表现，即它们广播。此外，在上面的示例中，a和b可以是相同形状的多维数组，也可以是一个标量和一个数组，甚至是两个不同形状的数组，只要较小的数组“可以”扩展到较大的数组的形状，从而得到的广播是明确的。有关广播的详细“规则”，请参见 [numpy.doc.broadcasting](/reference/ufuncs/broadcasting.html)。

NumPy完全支持面向对象的方法，同样从ndarray开始。例如，ndarray是一个类，具有许多方法和属性。它的许多方法在最外层的NumPy命名空间中映射函数，让码农们可以完全自由地按照自己的习惯编写合适的代码。

## 安装NumPy

在大多数使用场景中，在你的系统上安装NumPy的最好方法是使用预先构建的软件包在你的操作系统上运行。

具体可以参考本手册的：[NumPy用户指南->NumPy安装](https://www.numpy.org.cn/user_guide/installing_packages.html) 。

高级用户想知道如何从源码构建方面的说明，可以参考本手册的： [NumPy用户指南->从源码编译](https://www.numpy.org.cn/user_guide/building_from_source.html)。